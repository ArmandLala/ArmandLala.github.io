<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <meta charset="utf-8"> 
  <title>URBAN MYCELIUM | A L</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet">
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/skeleton.css">
  <link rel="stylesheet" href="css/customize.css">
</head>
<body>
  <!-- NAVBAR START -->
<nav class="navbar">
  <div class="navbar-left">
    <a href="index.html" class="navbar-home" title="Home">
      <!-- Casetta in SVG: puoi cambiare la dimensione (width/height) -->
      <svg width="24" height="24" fill="white" viewBox="0 0 24 24" style="vertical-align: middle;">
        <path d="M3 11l9-9 9 9h-2v8a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-4h-2v4a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-8H3z" stroke="white" stroke-width="2" fill="none"/>
      </svg>
    </a>
  </div>
 <div class="navbar-right">
  <a href="about.html">ABOUT</a>
  <a href="contacts.html">CONTACTS</a>
  <div class="dropdown">
  <a href="#" class="dropbtn">PROJECTS</a>
  <div class="dropdown-content">
    <a href="project1.html">OPULENT TILING</a>
    <a href="project2.html">▲ ◼</a>
    <a href="project3.html">MAZE</a>
    <a href="project4.html">▲ ◼ ⏺</a>
    <a href="project5.html">URBAN MYCELIUM</a>
    <a href="project6.html">HYPNO SPIRAL</a>
    <a href="project7.html">SUNFLOWER</a>
    <a href="project8.html">LOCATION OF A CIRCLE</a>
    <a href="project9.html">DYNAMIC QUAD-SPLIT METER</a>
  </div>
</div>

</div>

</nav>
<!-- NAVBAR END -->
  
  <div class="project-glass-wrapper">
    <!-- Blocco 1: COPERTINA -->
    <div class="glass-box">
  <div class="cover-head">
    <h1 class="cover-title">URBAN MYCELIUM</h1>
    <div class="cover-icons">
      <a href="https://editor.p5js.org/armand.lala0/sketches/afJM1HSU3" target="_blank" title="Vai al progetto JS" class="icon-btn">
        <span class="icon-js">JS*</span>
      </a>
      <a href="doc/Urban Mycelium.pdf" target="_blank" download title="Scarica PDF" class="icon-btn">
        <svg height="20" width="20" viewBox="0 0 20 20" fill="none" stroke="white" stroke-width="2">
          <rect x="4" y="2" width="12" height="16" rx="2" fill="none"/>
          <path d="M8 6h4M8 10h4M8 14h4"/>
        </svg>
      </a>
    </div>
  </div>
  <img src="images/brown.png" alt="Blue Project" class="cover-img">

    </div>
    <!-- Blocco 2: DESCRIZIONE -->
    <div class="glass-box">
      <p>
        The code for Urban Mycelium builds an interactive simulation based on the behavior of
autonomous agents (the "mold") moving through a digital map of Rome. The structure is divided
into several main parts that handle graphics, logic, and interaction.
When the sketch starts, the program loads an image of Rome (roma_1.png) which has been
processed to highlight dark paths. These paths represent viable routes that the mold can travel.
The image is resized and turned into pixel data so that the program can check whether a
specific point on the map is walkable.
Two off-screen canvases are used in parallel:
● trailCanvas shows the short-term movement of the mold as glowing trails.
● heatmapCanvas builds up a long-term trace of where the mold has passed, using color
to show "hotspots" of activity.

The mold agents are created when the user clicks on the canvas for the first time. They spawn
at the nearest valid location (a thick channel) and begin exploring the map. Each mold moves
based on a combination of random wandering and attraction to nearby “nodes,” which represent
districts of Rome. These nodes have three properties: income, public services, and toxicity.

The mold chooses which node to approach based on a calculated “utility” score (income +
services − toxicity), but with a bit of randomness added. If it finds a node with high utility and
stays near it long enough, it can decide to "settle" there. Once settled, the mold stops moving
but still influences the data.
Each node is a point on the map representing a real Roman neighborhood. The values for
income, services, and toxicity are manually set based on general knowledge of the city. These
values change during the simulation: income and services go up slightly when mold gathers
near a node, but toxicity increases if the population becomes too dense. This models a
feedback loop, where too much growth can lead to environmental stress.
The user can hover over any node to see a popup with information: the district’s name, current
values, and how many mold agents are interacting with it.
Visually, the simulation shows agents as pulsating blue circles. As they move, they leave behind
soft trails on the trailCanvas, and their movement adds color to the heatmapCanvas,
making it easy to see which parts of the city are most active.
The simulation also includes a slider that allows the user to control the speed of the agents in
real time, offering a way to slow down or accelerate the spread.

The code creates a system where simple agents, following local rules and responding to their
environment, generate complex, organic-looking patterns. It reflects how individuals can
collectively shape the dynamics of a city over time, just like mycelium growing through a
landscape.</p>
    </div>
    <!-- Blocco 3: GALLERIA -->
    <div class="glass-box">
      <h3>IMAGE GALLERY</h3>
      <div class="gallery-row">
        <img src="images/project_5/1.png" alt="img1" class="gallery-img">
        <img src="images/project_5/2.png" alt="img2" class="gallery-img">
        <img src="images/project_5/3.png" alt="img3" class="gallery-img">
        <img src="images/project_5/4.png" alt="img4" class="gallery-img">
        <img src="images/project_5/5.png" alt="img5" class="gallery-img">
        <img src="images/project_5/6.png" alt="img6" class="gallery-img">
        <!-- altre immagini se vuoi -->
      </div>
    </div>
  </div>

    <div class="row one-bottom center">
    <p>©ARMAND LALA 2025</p>
  </div>
</div>
  
  <script src="js/p5.js"></script>
  <script src="js/p5.sound.min.js"></script>
  <script src="js/mold.js"></script>
  <script src="js/sketch.js"></script>

  <!-- POPUP OVERLAY -->
<div id="img-popup" style="display:none;position:fixed;z-index:10000;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.77);justify-content:center;align-items:center;">
  <span id="popup-prev" class="popup-arrow" aria-label="Precedente">&lt;</span>
  <img id="img-popup-big" src="" style="max-width:90vw;max-height:85vh;border-radius:14px;box-shadow:0 6px 32px rgba(60,60,80,0.16);border:3px solid #fff;">
  <span id="popup-next" class="popup-arrow" aria-label="Successiva">&gt;</span>
</div>

<script>
const images = Array.from(document.querySelectorAll('.gallery-img'));
let currentIndex = 0;

function showPopup(index) {
  if(index < 0 || index >= images.length) return;
  currentIndex = index;
  document.getElementById('img-popup-big').src = images[currentIndex].src;
  document.getElementById('img-popup').style.display = 'flex';
}

images.forEach((img, idx) => {
  img.style.cursor = "pointer";
  img.onclick = function(e) {
    e.stopPropagation();
    showPopup(idx);
  }
});

function closePopup() {
  document.getElementById('img-popup').style.display = 'none';
}

document.getElementById('img-popup').onclick = closePopup;

document.getElementById('popup-prev').onclick = function(e) {
  e.stopPropagation();
  showPopup((currentIndex - 1 + images.length) % images.length);
};
document.getElementById('popup-next').onclick = function(e) {
  e.stopPropagation();
  showPopup((currentIndex + 1) % images.length);
};

// Tastiera: ← (37), → (39), ESC (27)
document.addEventListener('keydown', function(e) {
  if(document.getElementById('img-popup').style.display === 'flex') {
    if(e.key === 'ArrowLeft') {
      showPopup((currentIndex - 1 + images.length) % images.length);
      e.preventDefault();
    }
    if(e.key === 'ArrowRight') {
      showPopup((currentIndex + 1) % images.length);
      e.preventDefault();
    }
    if(e.key === 'Escape') {
      closePopup();
      e.preventDefault();
    }
  }
});
</script>


</body>
</html>
